<!DOCTYPE html>
<html>
<head>
	<title>Шахматка новостроек в 9 мкр. г. Реутова от Эксперта и НДВ (ЖК Новокосино)</title>
	<link rel="stylesheet" type="text/css" href="./default.css">
</head>
<body><div id="wrapper" class="wrapper"></div></body>
<script src="./generator.js"></script>
<script>
snapStr = '{"date":1391636691, "buildId":1, "list":[[126634,2,7133184,1708],[126635,2,9282851,1708],[126638,2,9135176,1708],[126639,2,7081584,1708],[126629,2,9282851,1708],[126623,2,9282851,1708],[126872,2,7162080,1708],[126877,2,7161048,1708],[126646,2,4876008,1708],[127112,2,7161048,1708],[127117,2,7161048,1708],[127000,2,4464390,1708],[126920,2,4100011,1708],[127352,2,7162080,1708],[127613,2,7176528,1708],[127617,2,5014728,1708],[127621,2,8042454,1708],[127547,2,7141758,1708],[127555,2,8003394,1708],[127536,2,7141758,1708],[127538,2,7579152,1708],[127525,2,7141758,1708],[127514,2,7141758,1708],[127522,2,8003394,1708],[127481,2,7106988,1708],[127390,2,7886214,1708],[127365,2,4922248,1708],[127366,2,4922248,1708],[127368,2,7808094,1708],[127669,2,8518718,1708]]}';

buildings2 = [
	{ bId:1, extBid:1708, flatStartExtId: 126496,
		link:"novokosino.ndv.ru/sale/?build=1708", name:"ЖК Новокосино (мкрн 9) от Эксперта и НДВ, корпус 1" },
	{	bId:2, extBid:1709, flatStartExtId: 127673,
		link:"novokosino.ndv.ru/sale/?build=1709", name:"ЖК Новокосино (мкрн 9) от Эксперта и НДВ, корпус 2" },
	{	bId:3, extBid:1710, flatStartExtId: 128537, isActive:0,
		link:"novokosino.ndv.ru/sale/?build=1710", name:"ЖК Новокосино (мкрн 9) от Эксперта и НДВ, корпус 3" }
	];
	
sections2 = [//no need in flatsNfrom and flatsQ yet
	{ bId:1, sectId:1, flatsNfrom:1, flatsQ:144, floorsFrom: 2, floorsTo: 25 },
	{ bId:1, sectId:2, flatsNfrom:145, flatsQ:240, floorsFrom: 2, floorsTo: 25 },
	{ bId:1, sectId:3, flatsNfrom:385, flatsQ:240, floorsFrom: 2, floorsTo: 25 },
	{ bId:1, sectId:4, flatsNfrom:625, flatsQ:240, floorsFrom: 2, floorsTo: 25 },
	{ bId:1, sectId:5, flatsNfrom:865, flatsQ:264, floorsFrom: 2, floorsTo: 25 },
	{ bId:1, sectId:6, flatsNfrom:1129, flatsQ:49, floorsFrom: 2, floorsTo: 11 },

	{ bId:2, sectId:1, flatsNfrom:1, flatsQ:240, floorsFrom: 2, floorsTo: 25 },
	{ bId:2, sectId:2, flatsNfrom:241, flatsQ:312, floorsFrom: 2, floorsTo: 25 },
	{ bId:2, sectId:3, flatsNfrom:553, flatsQ:312, floorsFrom: 2, floorsTo: 25 },

	{ bId:3, sectId:1, flatsNfrom:1, flatsQ:70, floorsFrom: 3, floorsTo: 16 },
	{ bId:3, sectId:2, flatsNfrom:71, flatsQ:64, floorsFrom: 3, floorsTo: 18 },
	{ bId:3, sectId:3, flatsNfrom:135, flatsQ:168, floorsFrom: 2, floorsTo: 25 },
	{ bId:3, sectId:4, flatsNfrom:303, flatsQ:168, floorsFrom: 2, floorsTo: 25 },
	{ bId:3, sectId:5, flatsNfrom:471, flatsQ:168, floorsFrom: 2, floorsTo: 25 },
	{ bId:3, sectId:6, flatsNfrom:639, flatsQ:60, floorsFrom: 2, floorsTo: 13 },
	{ bId:3, sectId:7, flatsNfrom:699, flatsQ:60, floorsFrom: 2, floorsTo: 13 },
	{ bId:3, sectId:8, flatsNfrom:759, flatsQ:60, floorsFrom: 2, floorsTo: 13 }	
	];
sections2.sort(function (a, b){ return a.sectId - b.sectId; });
//function addSectionPrototype(objArr){ objArr.forEach( function(section){ section.prototype = sectionPrototype; }); }
//sections.forEach(addSectionPrototype);

//expected format { flatId, date, status, price }
flats = [];

plans = [
	{ planId: 0, plan:[[2,69.12], [3,94.29], [2,63.36], [2,63.33], [3,92.79], [2,68.62]] },
	{ planId: 1, plan:[[1,30.37],[1,42.5],[2,69.4],[1,46.24],[1,46.24],[1,46.24],[1,46.24],[2,69.39],[1,41.2],[1,30.5]] },
	{ planId: 2, plan:[[1,30.37],[1,42.5],[2,69.39],[1,46.24],[1,46.24],[1,46.24],[1,46.24],[2,69.39],[1,42.32],[1,30.37]] },
	{ planId: 3, plan:[[1,30.36],[1,42.33],[2,69.4],[1,46.24],[1,46.24],[1,46.24],[1,46.24],[2,69.31],[1,42.33],[1,30.36]] },
	{ planId: 4, plan:[[2,69.54],[1,42.37],[2,74.16],[1,46.24],[1,46.24],[1,46.24],[1,46.24],[1,32.72],[3,78.12],[1,33.59],[1,33.59]] },
	{ planId: 5, plan:[[3,81.85], [1,30.08], [1,30.08], [1,31.13], [1,47.12], [2,57.81]] },
	{ planId: 6, plan:[[3,83.15], [1,30.05], [1,30.05], [1,31.05], [1,47]] },
	{ planId: 7, plan:[[3,83.15], [1,30.05], [1,30.05], [1,31.05]] },
		
	{ planId: 8, plan:[[2,74.89], [3,89.37], [3,83.58], [2,64.76], [1,45.43], [1,45.43], [1,45.43], [1,45.43], [2,69.53], [2,74.25]] },
	{ planId: 9, plan:[[1,50.29],[1,48.37],[1,43.55],[1,29.57],[1,28.76],[1,29.14],[1,29.14],[1,29.14],[1,29.14],[1,29.32],[2,64.73],[1,29.43],[1,49.25]] },
	{ planId: 10, plan:[[1,50.13],[1,49.46],[1,43.08],[1,29.57],[1,28.76],[1,29.14],[1,29.14],[1,29.14],[1,29.14],[1,29.32],[2,64.73],[1,30.18],[1,49.9]] },
	
	{ planId: 11, plan:[[2,71.5], [1,44.5], [1,30.9], [1,44.5], [3,94.8]] },
	{ planId: 12, plan:[[2,57.4], [1,38.9], [1,44.6], [2,75.66]] },
	{ planId: 13, plan:[[3,85], [2,75.8], [1,46.25], [1,28.7], [1,28.7], [1,28.73], [3,90.7]] },
	{ planId: 14, plan:[[3,95.19], [1,29.16], [1,30], [1,30], [1,30], [1,29.16], [3,94.19]] },
	{ planId: 15, plan:[[3,93.5], [1,27.83], [1,28.7], [1,28.7], [1,47.05], [2,63.4], [1,41.1]] },
	{ planId: 16, plan:[[4,120.42], [1,28.95], [1,43.2], [1,44.9], [3,84.31]] },
	{ planId: 17, plan:[[3,100.1], [1,46.4], [1,46.4], [1,32.05], [3,90.17]] },
	{ planId: 18, plan:[[2,68.57], [1,30.85], [1,46.45], [1,31], [3,78.97]] }
	];

n = +window.location.search.substring(1);
if (n !== 1 && n !== 2 && n !== 3) { n = 1; }
//console.time("default");
sections2plans = sec2plans();
snapObj = JSON.parse(snapStr);
flats = makeFlatsArray(n);
//console.log(flats);
//parseSnapShot(snapStr);
tableStr = drawTable(n);
//console.timeEnd("default");
document.getElementById('wrapper').innerHTML = tableStr;

//console.log(table);
//console.log(table.filter(function(value) { return value.building !== undefined }).length);
</script>
</html>